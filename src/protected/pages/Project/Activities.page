<com:TContent ID="Main">
<h1>Gesti&oacute;n de actividades</h1>

<fieldset class="selection-page">
	<legend>Actividades</legend>
	<div class="menu">
	<h2>Fases</h2>
	<com:TLabel ForControl="phaseList" 
		Text="Seleccione la fase que contiene las actividades: "/>
	<span class="required">*</span>
	<com:TListBox ID="phaseList" CssClass="items" AutoPostBack="True"
		OnSelectedIndexChanged="phaseChanged" />
	</div>
	<div class="list">
	<h2>Actividades</h2>
	<com:TDataList ID="actList"
		RepeatLayout="Raw"
		DataKeyField="ID"
		OnEditCommand="editEntryItem"
		OnCancelCommand="refreshEntryList"
		OnUpdateCommand="updateEntryItem"
		OnDeleteCommand="closeActivity"
		OnItemCreated="EntryItemCreated" >
		<prop:HeaderTemplate>
		  <table>
		  	<tr>
		  		<th>Nombre</th>
		  		<th>Descripci&oacute;n</th>
		  		<th>Inicio</th>
		  		<th>Duraci&oacute;n</th>
		  	</tr>
		</prop:HeaderTemplate>
		<prop:FooterTemplate>
		  </table>
		</prop:FooterTemplate>
		<prop:ItemTemplate>
		  <tr>
		  	<td><%# h($this->DataItem->Name) %></td>
		  	<td><%# h($this->DataItem->Description) %></td>
		  	<td><%# h($this->DataItem->EstimateDate) %></td>
		  	<td><%# h($this->DataItem->EstimateDuration) %></td>
		  	<td>
		  		<com:TButton Text="Editar" CommandName="edit"/>	  			
		  		<com:TButton Text="Finalizar" CommandName="delete"
		  			Attributes.onclick="if(!confirm(
		  			'Esto da por finalizada la actividad. Continuar?')) return false;" />
		  	</td>
		  </tr>
		</prop:ItemTemplate>
		<prop:EditItemTemplate>
		  <tr>
		  	<td><com:TTextBox ID="name" Text=<%# $this->DataItem->Name %> /></td>
		  	<td><com:TTextBox ID="description" Text=<%# $this->DataItem->Description %> /></td>
		  	<td><com:System.I18N.TDateFormat Pattern="dd/MM/yyyy"
				Value=<%# $this->DataItem->EstimateDate %> /></td>
		  	<td><com:TTextBox ID="hours" Text=<%# $this->DataItem->EstimateDuration %> /></td>
		  	<td>
		  		<com:TButton Text="Guardar" CommandName="update" />
		  		<com:TButton Text="Cancelar" CommandName="cancel" />
		  	</td>
		  </tr>
		</prop:EditItemTemplate>
	</com:TDataList>
	</div>
	
	<div class="actions"> &nbsp;
	<div class="buttons">
		<com:TValidationSummary	AutoUpdate="false" />
		<com:TButton Text="Agregar actividad" Onclick="addActivity"/>
	</div>	
	</div>
</fieldset>
</com:TContent>